<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>7 Importação dos Dados | Matéria de Análise de Dados (MAD) - Biomedicina</title>
  <meta name="description" content="Matéria de Análise de Dados com R (MAD-R): Curso para a Disciplina de Biomedicina" />
  <meta name="generator" content="bookdown 0.12 and GitBook 2.6.7" />

  <meta property="og:title" content="7 Importação dos Dados | Matéria de Análise de Dados (MAD) - Biomedicina" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Matéria de Análise de Dados com R (MAD-R): Curso para a Disciplina de Biomedicina" />
  <meta name="github-repo" content="jameshunterbr/MAD-Biomedicina-2019" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="7 Importação dos Dados | Matéria de Análise de Dados (MAD) - Biomedicina" />
  
  <meta name="twitter:description" content="Matéria de Análise de Dados com R (MAD-R): Curso para a Disciplina de Biomedicina" />
  



<meta name="date" content="2019-08-09" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="estilo-de-codigo-e-manipulacao-das-variaveis.html">

<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="introducao.html"><a href="introducao.html"><i class="fa fa-check"></i><b>1</b> Introdução</a></li>
<li class="chapter" data-level="2" data-path="vamos-comecar.html"><a href="vamos-comecar.html"><i class="fa fa-check"></i><b>2</b> Vamos Começar</a><ul>
<li class="chapter" data-level="2.1" data-path="vamos-comecar.html"><a href="vamos-comecar.html#historia-de-r-e-porque-precisamos-ele"><i class="fa fa-check"></i><b>2.1</b> Historia de R e Porque Precisamos Ele</a><ul>
<li class="chapter" data-level="2.1.1" data-path="vamos-comecar.html"><a href="vamos-comecar.html#historia"><i class="fa fa-check"></i><b>2.1.1</b> Historia</a></li>
<li class="chapter" data-level="2.1.2" data-path="vamos-comecar.html"><a href="vamos-comecar.html#porque-professor-jim-usa-r"><i class="fa fa-check"></i><b>2.1.2</b> Porque Professor Jim Usa R</a></li>
<li class="chapter" data-level="2.1.3" data-path="vamos-comecar.html"><a href="vamos-comecar.html#problemas-com-os-tradicionais-programas-da-analise-de-dados"><i class="fa fa-check"></i><b>2.1.3</b> Problemas com os Tradicionais Programas da Análise de Dados</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="vamos-comecar.html"><a href="vamos-comecar.html#software-open-source-vs.comercial"><i class="fa fa-check"></i><b>2.2</b> Software: Open-Source vs. Comercial</a></li>
<li class="chapter" data-level="2.3" data-path="vamos-comecar.html"><a href="vamos-comecar.html#r-vs.python"><i class="fa fa-check"></i><b>2.3</b> R vs. Python</a></li>
<li class="chapter" data-level="2.4" data-path="vamos-comecar.html"><a href="vamos-comecar.html#aprendizagem-de-r-e-dificil"><i class="fa fa-check"></i><b>2.4</b> Aprendizagem de R, É Difícil?</a></li>
<li class="chapter" data-level="2.5" data-path="vamos-comecar.html"><a href="vamos-comecar.html#advertencia-importante"><i class="fa fa-check"></i><b>2.5</b> Advertência Importante</a></li>
<li class="chapter" data-level="2.6" data-path="vamos-comecar.html"><a href="vamos-comecar.html#instalacao-dos-softwares"><i class="fa fa-check"></i><b>2.6</b> Instalação dos Softwares</a><ul>
<li class="chapter" data-level="2.6.1" data-path="vamos-comecar.html"><a href="vamos-comecar.html#instalacao-do-r"><i class="fa fa-check"></i><b>2.6.1</b> Instalação do R</a></li>
<li class="chapter" data-level="2.6.2" data-path="vamos-comecar.html"><a href="vamos-comecar.html#instalacao-de-r-para-os-windows"><i class="fa fa-check"></i><b>2.6.2</b> Instalação de R para os Windows</a></li>
<li class="chapter" data-level="2.6.3" data-path="vamos-comecar.html"><a href="vamos-comecar.html#instalacao-do-rstudio"><i class="fa fa-check"></i><b>2.6.3</b> Instalação do RStudio</a></li>
</ul></li>
<li class="chapter" data-level="2.7" data-path="vamos-comecar.html"><a href="vamos-comecar.html#iniciando-rstudio"><i class="fa fa-check"></i><b>2.7</b> Iniciando RStudio</a></li>
<li class="chapter" data-level="2.8" data-path="vamos-comecar.html"><a href="vamos-comecar.html#instalar-os-pacotes-necessarios"><i class="fa fa-check"></i><b>2.8</b> Instalar os Pacotes Necessários</a><ul>
<li class="chapter" data-level="2.8.1" data-path="vamos-comecar.html"><a href="vamos-comecar.html#nosso-primeiro-programa"><i class="fa fa-check"></i><b>2.8.1</b> Nosso Primeiro Programa</a></li>
<li class="chapter" data-level="2.8.2" data-path="vamos-comecar.html"><a href="vamos-comecar.html#localizacao-do-arquivo-instalar_pacotes.r"><i class="fa fa-check"></i><b>2.8.2</b> Localização do Arquivo <code>instalar_pacotes.R</code></a></li>
<li class="chapter" data-level="2.8.3" data-path="vamos-comecar.html"><a href="vamos-comecar.html#o-que-e-um-working-directory"><i class="fa fa-check"></i><b>2.8.3</b> O Que É Um <em>Working Directory</em>?</a></li>
<li class="chapter" data-level="2.8.4" data-path="vamos-comecar.html"><a href="vamos-comecar.html#instalar-os-pacotes"><i class="fa fa-check"></i><b>2.8.4</b> Instalar os Pacotes</a></li>
</ul></li>
<li class="chapter" data-level="2.9" data-path="vamos-comecar.html"><a href="vamos-comecar.html#prontos-para-trabalhar"><i class="fa fa-check"></i><b>2.9</b> Prontos para Trabalhar</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="recursos-para-o-curso.html"><a href="recursos-para-o-curso.html"><i class="fa fa-check"></i><b>3</b> Recursos para o Curso</a><ul>
<li class="chapter" data-level="3.1" data-path="recursos-para-o-curso.html"><a href="recursos-para-o-curso.html#cursos"><i class="fa fa-check"></i><b>3.1</b> Cursos</a></li>
<li class="chapter" data-level="3.2" data-path="recursos-para-o-curso.html"><a href="recursos-para-o-curso.html#livros-r-programacao"><i class="fa fa-check"></i><b>3.2</b> Livros — R &amp; Programação</a></li>
<li class="chapter" data-level="3.3" data-path="recursos-para-o-curso.html"><a href="recursos-para-o-curso.html#cheatsheets"><i class="fa fa-check"></i><b>3.3</b> <em>Cheatsheets</em></a></li>
<li class="chapter" data-level="3.4" data-path="recursos-para-o-curso.html"><a href="recursos-para-o-curso.html#sites"><i class="fa fa-check"></i><b>3.4</b> Sites</a></li>
<li class="chapter" data-level="3.5" data-path="recursos-para-o-curso.html"><a href="recursos-para-o-curso.html#canal-de-video"><i class="fa fa-check"></i><b>3.5</b> Canal de Vídeo</a></li>
<li class="chapter" data-level="3.6" data-path="recursos-para-o-curso.html"><a href="recursos-para-o-curso.html#sistema-de-ajuda-de-r-e-rstudio"><i class="fa fa-check"></i><b>3.6</b> Sistema de Ajuda de R e RStudio</a></li>
<li class="chapter" data-level="3.7" data-path="recursos-para-o-curso.html"><a href="recursos-para-o-curso.html#um-pensamento-final-perguntas"><i class="fa fa-check"></i><b>3.7</b> Um Pensamento Final — Perguntas</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="tipos-de-variaveis-comuns.html"><a href="tipos-de-variaveis-comuns.html"><i class="fa fa-check"></i><b>4</b> Tipos de Variáveis Comuns</a><ul>
<li class="chapter" data-level="4.1" data-path="tipos-de-variaveis-comuns.html"><a href="tipos-de-variaveis-comuns.html#o-que-sao-dados"><i class="fa fa-check"></i><b>4.1</b> O Que São Dados?</a></li>
<li class="chapter" data-level="4.2" data-path="tipos-de-variaveis-comuns.html"><a href="tipos-de-variaveis-comuns.html#exemplos-de-assignment"><i class="fa fa-check"></i><b>4.2</b> Exemplos de <em>Assignment</em></a></li>
<li class="chapter" data-level="4.3" data-path="tipos-de-variaveis-comuns.html"><a href="tipos-de-variaveis-comuns.html#projetos-e-pastas"><i class="fa fa-check"></i><b>4.3</b> Projetos e Pastas</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="projetos-e-pastas-1.html"><a href="projetos-e-pastas-1.html"><i class="fa fa-check"></i><b>5</b> Projetos e Pastas</a><ul>
<li class="chapter" data-level="5.1" data-path="projetos-e-pastas-1.html"><a href="projetos-e-pastas-1.html#projetos-em-rstudio"><i class="fa fa-check"></i><b>5.1</b> Projetos em RStudio</a></li>
<li class="chapter" data-level="5.2" data-path="projetos-e-pastas-1.html"><a href="projetos-e-pastas-1.html#criar-um-novo-projeto"><i class="fa fa-check"></i><b>5.2</b> Criar Um Novo Projeto</a><ul>
<li class="chapter" data-level="5.2.1" data-path="projetos-e-pastas-1.html"><a href="projetos-e-pastas-1.html#subpastas"><i class="fa fa-check"></i><b>5.2.1</b> SubPastas</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="projetos-e-pastas-1.html"><a href="projetos-e-pastas-1.html#onde-estamos-professor-were-here"><i class="fa fa-check"></i><b>5.3</b> Onde Estamos, Professor? “<em>We’re HERE</em>”</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="estilo-de-codigo-e-manipulacao-das-variaveis.html"><a href="estilo-de-codigo-e-manipulacao-das-variaveis.html"><i class="fa fa-check"></i><b>6</b> Estilo de Código e Manipulação das Variáveis</a><ul>
<li class="chapter" data-level="6.1" data-path="estilo-de-codigo-e-manipulacao-das-variaveis.html"><a href="estilo-de-codigo-e-manipulacao-das-variaveis.html#questoes-de-estilo"><i class="fa fa-check"></i><b>6.1</b> Questões de Estilo</a><ul>
<li class="chapter" data-level="6.1.1" data-path="estilo-de-codigo-e-manipulacao-das-variaveis.html"><a href="estilo-de-codigo-e-manipulacao-das-variaveis.html#uma-pergunta-sobre-o-estilo-parenteses-depois-de-uma-funcao"><i class="fa fa-check"></i><b>6.1.1</b> Uma Pergunta sobre o Estilo – Parenteses depois de uma função</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="estilo-de-codigo-e-manipulacao-das-variaveis.html"><a href="estilo-de-codigo-e-manipulacao-das-variaveis.html#conjunto-dos-dados-mais-complicado"><i class="fa fa-check"></i><b>6.2</b> Conjunto dos Dados Mais Complicado</a><ul>
<li class="chapter" data-level="6.2.1" data-path="estilo-de-codigo-e-manipulacao-das-variaveis.html"><a href="estilo-de-codigo-e-manipulacao-das-variaveis.html#passo-1-criar-um-projeto"><i class="fa fa-check"></i><b>6.2.1</b> Passo 1 — Criar Um Projeto</a></li>
<li class="chapter" data-level="6.2.2" data-path="estilo-de-codigo-e-manipulacao-das-variaveis.html"><a href="estilo-de-codigo-e-manipulacao-das-variaveis.html#passo-2-carregar-o-tidyverse"><i class="fa fa-check"></i><b>6.2.2</b> Passo 2 — Carregar o Tidyverse</a></li>
<li class="chapter" data-level="6.2.3" data-path="estilo-de-codigo-e-manipulacao-das-variaveis.html"><a href="estilo-de-codigo-e-manipulacao-das-variaveis.html#passo-3-download-os-dados-de-github"><i class="fa fa-check"></i><b>6.2.3</b> Passo 3 — Download os Dados de GitHub</a></li>
<li class="chapter" data-level="6.2.4" data-path="estilo-de-codigo-e-manipulacao-das-variaveis.html"><a href="estilo-de-codigo-e-manipulacao-das-variaveis.html#passo-4-carregar-os-dados-na-memoria-de-r"><i class="fa fa-check"></i><b>6.2.4</b> Passo 4 — Carregar os Dados na Memoria de R</a></li>
<li class="chapter" data-level="6.2.5" data-path="estilo-de-codigo-e-manipulacao-das-variaveis.html"><a href="estilo-de-codigo-e-manipulacao-das-variaveis.html#passo-5-qual-e-o-tipo-do-conjunto-dos-dados"><i class="fa fa-check"></i><b>6.2.5</b> Passo 5 — Qual É o Tipo do Conjunto dos Dados?</a></li>
<li class="chapter" data-level="6.2.6" data-path="estilo-de-codigo-e-manipulacao-das-variaveis.html"><a href="estilo-de-codigo-e-manipulacao-das-variaveis.html#passo-6-subconjuntos-subsets-de-dados"><i class="fa fa-check"></i><b>6.2.6</b> Passo 6 — Subconjuntos (<em>Subsets</em>) de <code>dados</code></a></li>
<li class="chapter" data-level="6.2.7" data-path="estilo-de-codigo-e-manipulacao-das-variaveis.html"><a href="estilo-de-codigo-e-manipulacao-das-variaveis.html#novos-nomes-para-as-variaveis-loops"><i class="fa fa-check"></i><b>6.2.7</b> Novos Nomes para as Variáveis — Loops</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="estilo-de-codigo-e-manipulacao-das-variaveis.html"><a href="estilo-de-codigo-e-manipulacao-das-variaveis.html#analise-de-dados-de-inflamacao"><i class="fa fa-check"></i><b>6.3</b> Análise de Dados de Inflamação</a></li>
<li class="chapter" data-level="6.4" data-path="estilo-de-codigo-e-manipulacao-das-variaveis.html"><a href="estilo-de-codigo-e-manipulacao-das-variaveis.html#graficos-do-conjunto-dos-dados"><i class="fa fa-check"></i><b>6.4</b> Gráficos do Conjunto dos Dados</a></li>
<li class="chapter" data-level="6.5" data-path="estilo-de-codigo-e-manipulacao-das-variaveis.html"><a href="estilo-de-codigo-e-manipulacao-das-variaveis.html#whew-final-da-introducao"><i class="fa fa-check"></i><b>6.5</b> Whew! Final da Introdução</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="importacao-dos-dados.html"><a href="importacao-dos-dados.html"><i class="fa fa-check"></i><b>7</b> Importação dos Dados</a><ul>
<li class="chapter" data-level="7.1" data-path="importacao-dos-dados.html"><a href="importacao-dos-dados.html#fluxo-de-trabalho-de-analises-em-r"><i class="fa fa-check"></i><b>7.1</b> Fluxo de Trabalho de Análises em R</a></li>
<li class="chapter" data-level="7.2" data-path="importacao-dos-dados.html"><a href="importacao-dos-dados.html#importar-dados-para-r"><i class="fa fa-check"></i><b>7.2</b> Importar Dados para R</a><ul>
<li class="chapter" data-level="7.2.1" data-path="importacao-dos-dados.html"><a href="importacao-dos-dados.html#read_csv-arquivos-.csv"><i class="fa fa-check"></i><b>7.2.1</b> <code>read_csv()</code> — Arquivos .csv</a></li>
<li class="chapter" data-level="7.2.2" data-path="importacao-dos-dados.html"><a href="importacao-dos-dados.html#planilhas-de-excel"><i class="fa fa-check"></i><b>7.2.2</b> Planilhas de Excel</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="importacao-dos-dados.html"><a href="importacao-dos-dados.html#nomes-dos-objetos-em-r"><i class="fa fa-check"></i><b>7.3</b> Nomes dos Objetos em R</a><ul>
<li class="chapter" data-level="7.3.1" data-path="importacao-dos-dados.html"><a href="importacao-dos-dados.html#assistencia-rstudio"><i class="fa fa-check"></i><b>7.3.1</b> Assistência – RStudio</a></li>
</ul></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Matéria de Análise de Dados (MAD) - Biomedicina</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="importacao-dos-dados" class="section level1">
<h1><span class="header-section-number">7</span> Importação dos Dados</h1>
<p>Os conceitos que se desenvolverem aqui são os que são necessários para entendimento do uso das ferramentas de programação como R para resolver problemas práticas da ciência ou dos negócios. Já vimos uma introdução aos alguns desses conceitos no Capítulos 4 e 6. Algumas coisas vão repetir o que você já viu nos capítulos anteriores, mas numa forma mais organizada.</p>
<div id="fluxo-de-trabalho-de-analises-em-r" class="section level2">
<h2><span class="header-section-number">7.1</span> Fluxo de Trabalho de Análises em R</h2>
<p>Qualquer projeto que precisa as ferramentas da ciência de dados tem uma forma e fluxo de trabalho parecida. O diagrama seguinte mostra este processo: <a href="#fn6" class="footnote-ref" id="fnref6"><sup>6</sup></a></p>
<div class="figure" style="text-align: center">
<img src="/Users/jameshunter/Documents/MAD/MAD-Biomedicina-2019/graficos/wickham_process.png" alt="Processo de Programação com R" width="294" />
<p class="caption">
(#fig:process_w)Processo de Programação com R
</p>
</div>
<p>O primeiro passo em qualquer análise em R é para <strong>importar</strong> os dados que vai analisar. O fonte mais popular nestes dias atuais é Microsoft Excel. Aqui nós vamos aprender como importar arquivos nos formatos <code>.csv</code> ou <code>xlsx</code> (ou seu primo mais antigo <code>.xls</code>) usando funções do Tidyverse.</p>
<p>Com os dados na memória de R como objeto, o próximo passo é para <strong>arrumar</strong> eles. Esta fase do trabalho inclui a descoberta dos erros de recordação, decidir o que fazer com variáveis que têm dados faltando (dados <code>NA</code>). Você precisa também ver se as variáveis têm valores bem fora dos valores esperados (<em>outliers</em>) e também decidir como tratar eles. Finalmente, aqui você pode acertar que os dados ficam <em>tidy</em>, ou seja, num formato consistente em que toda coluna é uma variável, toda linha uma observação e que cada conjunto de dados (<code>data.frame</code> ou <code>tibble</code>) só contem um tipo de dados. Essa consistência deixa você focar na análise e as questões que você quer responder sem precisar fazer uma nova limpeza ou arrumação. Surpreendentemente, esta fase de arrumar dados ocupa mais tempo que o tempo necessário para fazer as análises; leva até 70% do tempo inteiro que vai investir no projeto.</p>
<p>Uma vez que esses primeiros passos são completos, pode estudar as questões que motivaram o projeto no primeiro lugar. Nesta fase, o seu trabalho é cíclico. Você vai preparar um conjunto de dados menor que põe o foco nas observações que ajudam você responder à questão de interesse. As vezes, vai precisar transformar a escala ou unidade dos dados para facilitar a análise. Todo este processo de fazer um subconjunto do dados está chamada da fase de <strong>transformação</strong>.</p>
<p>Com os dados transformados, você pode explorar eles para entender a distribuição dos valores e a relação entre as variáveis. Nesta fase de <strong>visualização</strong>, você usa gráficos e tabelas para ver as possíveis abordagens dos modelos. Quando tem uma boa ideia da estrutura dos dados, pode experimentar um <strong>modelo</strong>. Quando você examina o resultados dos modelos, pode perceber que existem métodos de análise que produzirem respostas mais exatas às suas perguntas. Também pode ver se os resultados cumprem as premissas do modelo usado. Todos os modelos têm premissas que os dados devem seguir. Senão, precisa usar um outro tipo de modelo que permite o uso do conjunto dos dados que você está empregando.</p>
<p>É assim que essas fases de <em>transformação-visualização-modelagem</em> formam um ciclo. Você explora os dados e conduza as análises repetitivamente até que você consegue responder para sua pergunta.</p>
<p>Ao final, você deve fazer uma <strong>reportagem</strong> das análises. Uma análise sem um relatório é como o Koan zen que pergunta qual é o som de uma mão batendo palmas. Talvez produz grande iluminação pessoal mas não para os outros.</p>
</div>
<div id="importar-dados-para-r" class="section level2">
<h2><span class="header-section-number">7.2</span> Importar Dados para R</h2>
<div id="read_csv-arquivos-.csv" class="section level3">
<h3><span class="header-section-number">7.2.1</span> <code>read_csv()</code> — Arquivos .csv</h3>
<p>Já apresentei o uso de <code>readr::read_csv()</code> (o nome de um pacote seguido por 2 dois pontos e o nome de uma função é usado em R para especificar qual versão desse nome você quer usar ou, como neste caso, para enfatizar de qual pacote a função vem) em relação dos dados de inflamação. Vamos aplicar esta função para um caso de marcadores de infecção pelo vírus HIV-1, carga viral (cv) e nível dos células T-CD4+.</p>
<div class="figure" style="text-align: center">
<img src="/Users/jameshunter/Documents/MAD/MAD-Biomedicina-2019/graficos/excel_hiv.png" alt="Excel - Dados HIV.csv" width="144" />
<p class="caption">
(#fig:cv_cd4_excel)Excel - Dados HIV.csv
</p>
</div>
<p>Porque o padrão para o argumento <code>col_names</code> é <code>TRUE</code>, neste caso, podemos deixar a função importar as palavras na primeira linha como os nomes de variáveis. Se você não quer usar os nomes do Excel, pode mudar o argumento para <code>FALSE</code>, como fizemos no último capitulo. Também, <code>readr</code> tentará interpretar quais são as classes dos valores nas colunas, utilizando os primeiras 100 linhas para determinar se são caráteres, números, datas, ou valores lógicos. Você pode controlar os tipos de colunas com o argumento <code>col_types</code>. Neste caso, se quisemos, podemos especificar as colunas como <code>col_types = c(c,c,n,c)</code> (caractere, caractere, número, caractere) como esta figura mostra.</p>
<div class="figure" style="text-align: center">
<img src="/Users/jameshunter/Documents/MAD/MAD-Biomedicina-2019/graficos/col_types_help.png" alt="Tipos de Coluna" width="384" />
<p class="caption">
(#fig:col_types_help)Tipos de Coluna
</p>
</div>
<p>Para importar o arquivo dos pesos e alturas, podemos confiar que <code>read_csv()</code> vai reconhecer corretamente os tipos das colunas e que queremos os nomes na primeira linha como nomes das variáveis na base de dados. Podemos então usar uma forma simples do comando. Você pode ver que o tibble que resulta tem as classes (tipos) de variáveis corretos.</p>
<p><strong>VSS</strong> <em>Se você tem o seu arquivo <code>.csv</code> com números do estilo brasileiro (com uma vírgula como o separador entre a mantissa e as casas decimais), você precisa usar a versão da função <code>read_csv2()</code></em>. Esta versão da função separa os valores com um ponto e vírgula e reserva a vírgula usado sozinho para separador decimal.</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb75-1" data-line-number="1">wd &lt;-<span class="st"> </span>here<span class="op">::</span><span class="kw">here</span>()</a>
<a class="sourceLine" id="cb75-2" data-line-number="2">cv_cd4 &lt;-<span class="st"> </span>readr<span class="op">::</span><span class="kw">read_csv</span>(glue<span class="op">::</span><span class="kw">glue</span>(wd, <span class="st">&#39;/dados_cv_cd4.csv&#39;</span>))</a></code></pre></div>
<pre><code>## Parsed with column specification:
## cols(
##   pac = col_double(),
##   tipo = col_character(),
##   valor = col_double(),
##   data = col_character()
## )</code></pre>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb77-1" data-line-number="1"><span class="kw">str</span>(cv_cd4)</a></code></pre></div>
<pre><code>## Classes &#39;spec_tbl_df&#39;, &#39;tbl_df&#39;, &#39;tbl&#39; and &#39;data.frame&#39;: 304 obs. of  4 variables:
##  $ pac  : num  1 1 1 1 2 2 2 2 3 3 ...
##  $ tipo : chr  &quot;cv&quot; &quot;cv&quot; &quot;cv&quot; &quot;cv&quot; ...
##  $ valor: num  130000 260000 480000 400000 17000 450000 200000 350000 290000 350000 ...
##  $ data : chr  &quot;02/07/2018&quot; &quot;30/07/2018&quot; &quot;27/08/2018&quot; &quot;24/09/2018&quot; ...
##  - attr(*, &quot;spec&quot;)=
##   .. cols(
##   ..   pac = col_double(),
##   ..   tipo = col_character(),
##   ..   valor = col_double(),
##   ..   data = col_character()
##   .. )</code></pre>
<p>Quando discutimos a limpeza dos dados, nós vamos transformar a variável <code>Date</code> para uma variável do tipo <code>Date</code> para que possamos utilizar em cálculos das datas. <code>read_csv()</code> somente importa como um <em>string</em> (cadeia de caracteres) se você não especifica uma sequência dos tipos de coluna porque existem tantos maneiras para retratar datas no mundo inteiro que R não tenta de adivinhar qual é o formato usado.</p>
</div>
<div id="planilhas-de-excel" class="section level3">
<h3><span class="header-section-number">7.2.2</span> Planilhas de Excel</h3>
<p>O sistema <code>tidyverse</code> inclui um pacote, <code>readxl</code> que facilita importar os dados diretamente de uma planilha do Excel. Entretanto, ele não está carregado pelo comando <code>library(tidyverse)</code> e precisa ser carregado individualmente. <code>readxl</code> pode importar uma planilha do tipo moderno de <code>.xlsx</code> ou do tipo antigo <code>.xls</code>. O comando <code>read_excel()</code> tenta adivinhar qual é o tipo de arquivo que você abre. Se tiver problemas com o arquivo, você pode usar ou <code>read_xlsx</code> ou <code>read_xls</code> diretamente para abrir aquele tipo de arquivo.</p>
<p>Para demonstrar esta função, eu vou usar um arquivo derivado de um outro projeto verdadeiro de pesquisa em que estou envolvido sobre a doença HIV. A planilha mostra alguns dados sobre os pacientes e sobre os resultados dos exames que eles fizeram ao início do estudo. Esta planilha, <code>pac_demo.xlsx</code> tem duas folhas. A primeira, <code>pac_demo</code>, contem os dados. A segunda folha, <code>data_dic</code> tem a dicionário dos dados, ou seja, uma lista dos nomes das variáveis, os seus tipos, e uma explicação textural do conteúdo.</p>
<div class="figure" style="text-align: center">
<img src="/Users/jameshunter/Documents/MAD/MAD-Biomedicina-2019/graficos/excel_data_dic.png" alt="Diccionário dos Dados" width="262" />
<p class="caption">
(#fig:data_dic)Diccionário dos Dados
</p>
</div>
<p><strong>VSS</strong> <em>É sempre uma boa praxe criar uma dicionário dos dados para seu trabalho.</em> Pode ser no formato em que você grava os dados inicialmente (e.g., Excel), em R ou até num caderno. Vale muito a pena para ajudar você e outros entender e reproduzir os seus resultados.</p>
<p>A função <code>read_excel()</code> funciona muito semelhante a função <code>read_csv</code>. Você especifica o arquivo para ser importado, o nome da folha (diferentemente de uma arquivo <code>.csv</code>, que não tem folhas), uma cadeia de caracteres para os tipos das colunas, além das outras opções que pode consultar na tela de <code>Help</code>.</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb79-1" data-line-number="1">pac_data &lt;-<span class="st"> </span>readxl<span class="op">::</span><span class="kw">read_excel</span>(glue<span class="op">::</span><span class="kw">glue</span>(wd, <span class="st">&#39;/pac_demo.xlsx&#39;</span>), </a>
<a class="sourceLine" id="cb79-2" data-line-number="2">                               <span class="dt">sheet =</span> <span class="st">&quot;pac_demo&quot;</span>)</a>
<a class="sourceLine" id="cb79-3" data-line-number="3">tibble<span class="op">::</span><span class="kw">glimpse</span>(pac_data)</a></code></pre></div>
<pre><code>## Observations: 50
## Variables: 10
## $ codepac      &lt;dbl&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, …
## $ idade        &lt;dbl&gt; 60, 73, 51, 50, 44, 63, 25, 61, 49, 41, 44, 81, 25,…
## $ sexo         &lt;chr&gt; &quot;Masculino&quot;, &quot;Masculino&quot;, &quot;Feminino&quot;, &quot;Masculino&quot;, …
## $ ufnasc       &lt;chr&gt; &quot;RS&quot;, &quot;SP&quot;, &quot;SP&quot;, &quot;SP&quot;, &quot;CE&quot;, &quot;MA&quot;, &quot;SP&quot;, &quot;RS&quot;, &quot;RS…
## $ raca         &lt;chr&gt; &quot;NA&quot;, &quot;Branca&quot;, &quot;Parda&quot;, &quot;Branca&quot;, &quot;Parda&quot;, &quot;NA&quot;, &quot;…
## $ escol        &lt;chr&gt; &quot;NA&quot;, &quot;De 8 a 11 anos&quot;, &quot;De 4 a 7 anos&quot;, &quot;De 8 a 11…
## $ gestante     &lt;chr&gt; &quot;Nao&quot;, &quot;Nao&quot;, &quot;Nao&quot;, &quot;NA&quot;, &quot;Nao&quot;, &quot;Nao&quot;, &quot;Nao&quot;, &quot;Na…
## $ copias_cv    &lt;dbl&gt; 5200, 1947, 480000, 257313, 2585, 84, 1286, 13000, …
## $ contagem_cd4 &lt;dbl&gt; 898, 958, 958, 142, 524, 256, 353, 928, 66, 66, 388…
## $ contagem_cd8 &lt;dbl&gt; 1311, 817, 817, 1009, 586, 651, 393, 1740, 801, 801…</code></pre>
<p>No passado com R e até hoje com outras linguagens, foi considerado necessário salvar uma planilha em <code>.csv</code> antes de importar. Com o pacote <code>readxl</code>, este passo não é mais necessário. Pode importar diretamente da planilha original.</p>
</div>
</div>
<div id="nomes-dos-objetos-em-r" class="section level2">
<h2><span class="header-section-number">7.3</span> Nomes dos Objetos em R</h2>
<p>Nomes dos objetos (variáveis, funções, etc.) em R devem começar com uma letra e contem só letras, números, <code>_</code> (caractere de sublinhado), e <code>.</code> (ponto final).</p>
<p>Além disso, nomes devem ser descritivos para que você lembra o que você está fazendo e para outros o conhecem facilmente. Assim, você provavelmente vai querer combinar mais que uma palavra. Para fazer isso, existem alternativas que vários programadores usam:</p>
<ol style="list-style-type: decimal">
<li>combine_palavras_assim (<em>snake case</em>)</li>
<li>useMaiusculosMinusculos (<em>camel case</em>)</li>
<li>usar.pontos.entre.palavras</li>
</ol>
<p>Minha preferência é para #1, <em>snake case</em> porque não precisa mexer com as letras maiúsculos e inclui um pouco de espaço entre as palavras. Experiência mostra que qualquer opção você escolhe, seja consistente no uso dele.</p>
<p>Também, R e todas as outras linguagens de programação são muitos bravas sobre a ortografia das palavras. Se você não escreve o nome de um objeto exatamente na forma que você o designou originalmente, R não vai o reconhecer e vai retornar um erro.</p>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb81-1" data-line-number="1">r_designacao &lt;-<span class="st"> </span><span class="dv">26</span> <span class="op">*</span><span class="st"> </span><span class="dv">37</span></a>
<a class="sourceLine" id="cb81-2" data-line-number="2"><span class="co"># agora quero ver o valor</span></a></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:spell"></span>
<img src="/Users/jameshunter/Documents/MAD/MAD-Biomedicina-2019/graficos/spelling_erro.png" alt="Erros de atribuição" width="184" />
<p class="caption">
Figure 7.1: Erros de atribuição
</p>
</div>
<p>Essas duas tentativas não deram certas. A primeira substituiu um ponto para o sublinhado e o segundo corrigiu este erro mas usou um “D” maiúsculo. Entretanto, se teclamos o nome certo …</p>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb82-1" data-line-number="1">r_designacao</a></code></pre></div>
<pre><code>## [1] 962</code></pre>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb84-1" data-line-number="1"><span class="co"># Finalmente, o valor</span></a></code></pre></div>
<p>A diferença de só 1 caractere é suficiente para confundir R e produz o erro. Também, R distingue entre letras minusculas e letras maiúsculas. <strong>VSS</strong> <em>Prestem atenção nos detalhes dos nomes dos objetos.</em></p>
<div id="assistencia-rstudio" class="section level3">
<h3><span class="header-section-number">7.3.1</span> Assistência – RStudio</h3>
<p>Na luta para lembrar e grafar os nomes dos objetos corretamente, RStudio pode ajudar você com 2 atalhos. Primeiro, se você escreve os primeiros caráteres de um nome e toca na tecla <TAB>, RStudio vai dar uma lista dos objetos (variáveis, data frames, tibbles e funções) que começam com este sequência dos caráteres. A figura seguinte mostra esta ajuda. Selecione o nome que você quer e toca no <TAB> de novo. RStudio vai completar o nome.</p>
<div class="figure" style="text-align: center">
<img src="/Users/jameshunter/Documents/MAD/MAD-Biomedicina-2019/graficos/name_choice.png" alt="&lt;TAB&gt; Ajuda com Nomes" width="156" />
<p class="caption">
(#fig:name_help)<TAB> Ajuda com Nomes
</p>
</div>
<p>Segundo, se você tecla uma linha de código complicado e fazer um erro, mas não quer teclar toda a linha de novo, RStudio pode ajudar você. O software lembra todas as linhas de código que você já escreveu. Se você escreve só os primeiros caráteres da linha e toca nas teclas <CMD/CTRL> + <SETA-PARA-CIMA> e RStudio mostrará as últimas linhas de código que usam estes caráteres ao início. No exemplo seguinte, uma linha de código de um projeto de pesquisa meu, teclei o nome de um objeto como <code>trpl_new</code> e R retornou um erro. Eu quis <code>prpl_new</code>. Invés de escrever toda a linha de novo, posso tocar a combinação de <CMD/CTRL> + <SETA-PARA-CIMA> no Console (não na janela de programação), e a historia dos comandos aparecerá. Selecione a linha que você quer inserir, faça sua correção e executar. Se a linha de código que você quer repetir (para corrigir) é a última, existe uma versão simplificada deste truque: só toque na tecla de <SETA-PARA-CIMA> e a última linha vai aparacer no Console. Finalmente, você pode ver todas as linhas que você já executou, mesmo se eles vieram das sessões de trabalho anteriores na aba <code>History</code> da janela a cima para direta como a figura seguinte mostra. <a href="#fn7" class="footnote-ref" id="fnref7"><sup>7</sup></a></p>
<div class="figure" style="text-align: center"><span id="fig:history"></span>
<img src="/Users/jameshunter/Documents/MAD/MAD-Biomedicina-2019/graficos/history.png" alt="&lt;TAB&gt; Janela de History" width="368" />
<p class="caption">
Figure 7.2: <TAB> Janela de History
</p>
</div>
</div>
</div>
</div>












<div class="footnotes">
<hr />
<ol start="6">
<li id="fn6"><p>Wickham, Hadley &amp; Grolemund, Garrett, <strong>R for Data Science</strong> (O’Reilly, Sebastopol, CA, January 2017).<a href="importacao-dos-dados.html#fnref6" class="footnote-back">↩</a></p></li>
<li id="fn7"><p>É difícil de mostrar isso num documento. Criarei um vídeo no canal de YouTube para demonstrar como funciona este ajuda histórica.<a href="importacao-dos-dados.html#fnref7" class="footnote-back">↩</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="estilo-de-codigo-e-manipulacao-das-variaveis.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
},
"search": false
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
