<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>6 Estilo de Código e Manipulação das Variáveis | Matéria de Análise de Dados (MAD) - Biomedicina</title>
  <meta name="description" content="Matéria de Análise de Dados com R (MAD-R): Curso para a Disciplina de Biomedicina" />
  <meta name="generator" content="bookdown 0.12 and GitBook 2.6.7" />

  <meta property="og:title" content="6 Estilo de Código e Manipulação das Variáveis | Matéria de Análise de Dados (MAD) - Biomedicina" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Matéria de Análise de Dados com R (MAD-R): Curso para a Disciplina de Biomedicina" />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="6 Estilo de Código e Manipulação das Variáveis | Matéria de Análise de Dados (MAD) - Biomedicina" />
  
  <meta name="twitter:description" content="Matéria de Análise de Dados com R (MAD-R): Curso para a Disciplina de Biomedicina" />
  



<meta name="date" content="2019-08-06" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="projetos-e-pastas-1.html">
<link rel="next" href="importacao-dos-dados.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="introducao.html"><a href="introducao.html"><i class="fa fa-check"></i><b>1</b> Introdução</a></li>
<li class="chapter" data-level="2" data-path="vamos-comecar.html"><a href="vamos-comecar.html"><i class="fa fa-check"></i><b>2</b> Vamos Começar</a><ul>
<li class="chapter" data-level="2.1" data-path="vamos-comecar.html"><a href="vamos-comecar.html#historia-de-r-e-porque-precisamos-ele"><i class="fa fa-check"></i><b>2.1</b> Historia de R e Porque Precisamos Ele</a><ul>
<li class="chapter" data-level="2.1.1" data-path="vamos-comecar.html"><a href="vamos-comecar.html#historia"><i class="fa fa-check"></i><b>2.1.1</b> Historia</a></li>
<li class="chapter" data-level="2.1.2" data-path="vamos-comecar.html"><a href="vamos-comecar.html#porque-professor-jim-usa-r"><i class="fa fa-check"></i><b>2.1.2</b> Porque Professor Jim Usa R</a></li>
<li class="chapter" data-level="2.1.3" data-path="vamos-comecar.html"><a href="vamos-comecar.html#problemas-com-os-tradicionais-programas-da-analise-de-dados"><i class="fa fa-check"></i><b>2.1.3</b> Problemas com os Tradicionais Programas da Análise de Dados</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="vamos-comecar.html"><a href="vamos-comecar.html#software-open-source-vs.comercial"><i class="fa fa-check"></i><b>2.2</b> Software: Open-Source vs. Comercial</a></li>
<li class="chapter" data-level="2.3" data-path="vamos-comecar.html"><a href="vamos-comecar.html#r-vs.python"><i class="fa fa-check"></i><b>2.3</b> R vs. Python</a></li>
<li class="chapter" data-level="2.4" data-path="vamos-comecar.html"><a href="vamos-comecar.html#aprendizagem-de-r-e-dificil"><i class="fa fa-check"></i><b>2.4</b> Aprendizagem de R, É Difícil?</a></li>
<li class="chapter" data-level="2.5" data-path="vamos-comecar.html"><a href="vamos-comecar.html#advertencia-importante"><i class="fa fa-check"></i><b>2.5</b> Advertência Importante</a></li>
<li class="chapter" data-level="2.6" data-path="vamos-comecar.html"><a href="vamos-comecar.html#instalacao-dos-softwares"><i class="fa fa-check"></i><b>2.6</b> Instalação dos Softwares</a><ul>
<li class="chapter" data-level="2.6.1" data-path="vamos-comecar.html"><a href="vamos-comecar.html#instalacao-do-r"><i class="fa fa-check"></i><b>2.6.1</b> Instalação do R</a></li>
<li class="chapter" data-level="2.6.2" data-path="vamos-comecar.html"><a href="vamos-comecar.html#instalacao-de-r-para-os-windows"><i class="fa fa-check"></i><b>2.6.2</b> Instalação de R para os Windows</a></li>
<li class="chapter" data-level="2.6.3" data-path="vamos-comecar.html"><a href="vamos-comecar.html#instalacao-do-rstudio"><i class="fa fa-check"></i><b>2.6.3</b> Instalação do RStudio</a></li>
</ul></li>
<li class="chapter" data-level="2.7" data-path="vamos-comecar.html"><a href="vamos-comecar.html#iniciando-rstudio"><i class="fa fa-check"></i><b>2.7</b> Iniciando RStudio</a></li>
<li class="chapter" data-level="2.8" data-path="vamos-comecar.html"><a href="vamos-comecar.html#instalar-os-pacotes-necessarios"><i class="fa fa-check"></i><b>2.8</b> Instalar os Pacotes Necessários</a><ul>
<li class="chapter" data-level="2.8.1" data-path="vamos-comecar.html"><a href="vamos-comecar.html#nosso-primeiro-programa"><i class="fa fa-check"></i><b>2.8.1</b> Nosso Primeiro Programa</a></li>
<li class="chapter" data-level="2.8.2" data-path="vamos-comecar.html"><a href="vamos-comecar.html#localizacao-do-arquivo-instalar_pacotes.r"><i class="fa fa-check"></i><b>2.8.2</b> Localização do Arquivo <code>instalar_pacotes.R</code></a></li>
<li class="chapter" data-level="2.8.3" data-path="vamos-comecar.html"><a href="vamos-comecar.html#o-que-e-um-working-directory"><i class="fa fa-check"></i><b>2.8.3</b> O Que É Um <em>Working Directory</em>?</a></li>
<li class="chapter" data-level="2.8.4" data-path="vamos-comecar.html"><a href="vamos-comecar.html#instalar-os-pacotes"><i class="fa fa-check"></i><b>2.8.4</b> Instalar os Pacotes</a></li>
</ul></li>
<li class="chapter" data-level="2.9" data-path="vamos-comecar.html"><a href="vamos-comecar.html#prontos-para-trabalhar"><i class="fa fa-check"></i><b>2.9</b> Prontos para Trabalhar</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="recursos-para-o-curso.html"><a href="recursos-para-o-curso.html"><i class="fa fa-check"></i><b>3</b> Recursos para o Curso</a><ul>
<li class="chapter" data-level="3.1" data-path="recursos-para-o-curso.html"><a href="recursos-para-o-curso.html#cursos"><i class="fa fa-check"></i><b>3.1</b> Cursos</a></li>
<li class="chapter" data-level="3.2" data-path="recursos-para-o-curso.html"><a href="recursos-para-o-curso.html#livros-r-programacao"><i class="fa fa-check"></i><b>3.2</b> Livros — R &amp; Programação</a></li>
<li class="chapter" data-level="3.3" data-path="recursos-para-o-curso.html"><a href="recursos-para-o-curso.html#cheatsheets"><i class="fa fa-check"></i><b>3.3</b> <em>Cheatsheets</em></a></li>
<li class="chapter" data-level="3.4" data-path="recursos-para-o-curso.html"><a href="recursos-para-o-curso.html#sites"><i class="fa fa-check"></i><b>3.4</b> Sites</a></li>
<li class="chapter" data-level="3.5" data-path="recursos-para-o-curso.html"><a href="recursos-para-o-curso.html#canal-de-video"><i class="fa fa-check"></i><b>3.5</b> Canal de Vídeo</a></li>
<li class="chapter" data-level="3.6" data-path="recursos-para-o-curso.html"><a href="recursos-para-o-curso.html#sistema-de-ajuda-de-r-e-rstudio"><i class="fa fa-check"></i><b>3.6</b> Sistema de Ajuda de R e RStudio</a></li>
<li class="chapter" data-level="3.7" data-path="recursos-para-o-curso.html"><a href="recursos-para-o-curso.html#um-pensamento-final-perguntas"><i class="fa fa-check"></i><b>3.7</b> Um Pensamento Final — Perguntas</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="tipos-de-variaveis-comuns.html"><a href="tipos-de-variaveis-comuns.html"><i class="fa fa-check"></i><b>4</b> Tipos de Variáveis Comuns</a><ul>
<li class="chapter" data-level="4.1" data-path="tipos-de-variaveis-comuns.html"><a href="tipos-de-variaveis-comuns.html#o-que-sao-dados"><i class="fa fa-check"></i><b>4.1</b> O Que São Dados?</a></li>
<li class="chapter" data-level="4.2" data-path="tipos-de-variaveis-comuns.html"><a href="tipos-de-variaveis-comuns.html#exemplos-de-assignment"><i class="fa fa-check"></i><b>4.2</b> Exemplos de <em>Assignment</em></a></li>
<li class="chapter" data-level="4.3" data-path="tipos-de-variaveis-comuns.html"><a href="tipos-de-variaveis-comuns.html#projetos-e-pastas"><i class="fa fa-check"></i><b>4.3</b> Projetos e Pastas</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="projetos-e-pastas-1.html"><a href="projetos-e-pastas-1.html"><i class="fa fa-check"></i><b>5</b> Projetos e Pastas</a><ul>
<li class="chapter" data-level="5.1" data-path="projetos-e-pastas-1.html"><a href="projetos-e-pastas-1.html#projetos-em-rstudio"><i class="fa fa-check"></i><b>5.1</b> Projetos em RStudio</a></li>
<li class="chapter" data-level="5.2" data-path="projetos-e-pastas-1.html"><a href="projetos-e-pastas-1.html#criar-um-novo-projeto"><i class="fa fa-check"></i><b>5.2</b> Criar Um Novo Projeto</a><ul>
<li class="chapter" data-level="5.2.1" data-path="projetos-e-pastas-1.html"><a href="projetos-e-pastas-1.html#subpastas"><i class="fa fa-check"></i><b>5.2.1</b> SubPastas</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="projetos-e-pastas-1.html"><a href="projetos-e-pastas-1.html#onde-estamos-professor-were-here"><i class="fa fa-check"></i><b>5.3</b> Onde Estamos, Professor? “<em>We’re HERE</em>”</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="estilo-de-codigo-e-manipulacao-das-variaveis.html"><a href="estilo-de-codigo-e-manipulacao-das-variaveis.html"><i class="fa fa-check"></i><b>6</b> Estilo de Código e Manipulação das Variáveis</a><ul>
<li class="chapter" data-level="6.1" data-path="estilo-de-codigo-e-manipulacao-das-variaveis.html"><a href="estilo-de-codigo-e-manipulacao-das-variaveis.html#questoes-de-estilo"><i class="fa fa-check"></i><b>6.1</b> Questões de Estilo</a><ul>
<li class="chapter" data-level="6.1.1" data-path="estilo-de-codigo-e-manipulacao-das-variaveis.html"><a href="estilo-de-codigo-e-manipulacao-das-variaveis.html#uma-pergunta-sobre-o-estilo-parenteses-depois-de-uma-funcao"><i class="fa fa-check"></i><b>6.1.1</b> Uma Pergunta sobre o Estilo – Parenteses depois de uma função</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="estilo-de-codigo-e-manipulacao-das-variaveis.html"><a href="estilo-de-codigo-e-manipulacao-das-variaveis.html#conjunto-dos-dados-mais-complicado"><i class="fa fa-check"></i><b>6.2</b> Conjunto dos Dados Mais Complicado</a><ul>
<li class="chapter" data-level="6.2.1" data-path="estilo-de-codigo-e-manipulacao-das-variaveis.html"><a href="estilo-de-codigo-e-manipulacao-das-variaveis.html#passo-1-criar-um-projeto"><i class="fa fa-check"></i><b>6.2.1</b> Passo 1 — Criar Um Projeto</a></li>
<li class="chapter" data-level="6.2.2" data-path="estilo-de-codigo-e-manipulacao-das-variaveis.html"><a href="estilo-de-codigo-e-manipulacao-das-variaveis.html#passo-2-carregar-o-tidyverse"><i class="fa fa-check"></i><b>6.2.2</b> Passo 2 — Carregar o Tidyverse</a></li>
<li class="chapter" data-level="6.2.3" data-path="estilo-de-codigo-e-manipulacao-das-variaveis.html"><a href="estilo-de-codigo-e-manipulacao-das-variaveis.html#passo-3-download-os-dados-de-github"><i class="fa fa-check"></i><b>6.2.3</b> Passo 3 — Download os Dados de GitHub</a></li>
<li class="chapter" data-level="6.2.4" data-path="estilo-de-codigo-e-manipulacao-das-variaveis.html"><a href="estilo-de-codigo-e-manipulacao-das-variaveis.html#passo-4-carregar-os-dados-na-memoria-de-r"><i class="fa fa-check"></i><b>6.2.4</b> Passo 4 — Carregar os Dados na Memoria de R</a></li>
<li class="chapter" data-level="6.2.5" data-path="estilo-de-codigo-e-manipulacao-das-variaveis.html"><a href="estilo-de-codigo-e-manipulacao-das-variaveis.html#passo-5-qual-e-o-tipo-do-conjunto-dos-dados"><i class="fa fa-check"></i><b>6.2.5</b> Passo 5 — Qual É o Tipo do Conjunto dos Dados?</a></li>
<li class="chapter" data-level="6.2.6" data-path="estilo-de-codigo-e-manipulacao-das-variaveis.html"><a href="estilo-de-codigo-e-manipulacao-das-variaveis.html#passo-6-subconjuntos-subsets-de-dados"><i class="fa fa-check"></i><b>6.2.6</b> Passo 6 — Subconjuntos (<em>Subsets</em>) de <code>dados</code></a></li>
<li class="chapter" data-level="6.2.7" data-path="estilo-de-codigo-e-manipulacao-das-variaveis.html"><a href="estilo-de-codigo-e-manipulacao-das-variaveis.html#novos-nomes-para-as-variaveis-loops"><i class="fa fa-check"></i><b>6.2.7</b> Novos Nomes para as Variáveis — Loops</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="estilo-de-codigo-e-manipulacao-das-variaveis.html"><a href="estilo-de-codigo-e-manipulacao-das-variaveis.html#analise-de-dados-de-inflamacao"><i class="fa fa-check"></i><b>6.3</b> Análise de Dados de Inflamação</a></li>
<li class="chapter" data-level="6.4" data-path="estilo-de-codigo-e-manipulacao-das-variaveis.html"><a href="estilo-de-codigo-e-manipulacao-das-variaveis.html#graficos-do-conjunto-dos-dados"><i class="fa fa-check"></i><b>6.4</b> Gráficos do Conjunto dos Dados</a></li>
<li class="chapter" data-level="6.5" data-path="estilo-de-codigo-e-manipulacao-das-variaveis.html"><a href="estilo-de-codigo-e-manipulacao-das-variaveis.html#whew-final-da-introducao"><i class="fa fa-check"></i><b>6.5</b> Whew! Final da Introdução</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="importacao-dos-dados.html"><a href="importacao-dos-dados.html"><i class="fa fa-check"></i><b>7</b> Importação dos Dados</a><ul>
<li class="chapter" data-level="7.1" data-path="importacao-dos-dados.html"><a href="importacao-dos-dados.html#fluxo-de-trabalho-de-analises-em-r"><i class="fa fa-check"></i><b>7.1</b> Fluxo de Trabalho de Análises em R</a></li>
<li class="chapter" data-level="7.2" data-path="importacao-dos-dados.html"><a href="importacao-dos-dados.html#importar-dados-para-r"><i class="fa fa-check"></i><b>7.2</b> Importar Dados para R</a><ul>
<li class="chapter" data-level="7.2.1" data-path="importacao-dos-dados.html"><a href="importacao-dos-dados.html#read_csv-arquivos-.csv"><i class="fa fa-check"></i><b>7.2.1</b> <code>read_csv()</code> — Arquivos .csv</a></li>
<li class="chapter" data-level="7.2.2" data-path="importacao-dos-dados.html"><a href="importacao-dos-dados.html#planilhas-de-excel"><i class="fa fa-check"></i><b>7.2.2</b> Planilhas de Excel</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="importacao-dos-dados.html"><a href="importacao-dos-dados.html#nomes-dos-objetos-em-r"><i class="fa fa-check"></i><b>7.3</b> Nomes dos Objetos em R</a><ul>
<li class="chapter" data-level="7.3.1" data-path="importacao-dos-dados.html"><a href="importacao-dos-dados.html#assistencia-rstudio"><i class="fa fa-check"></i><b>7.3.1</b> Assistência – RStudio</a></li>
</ul></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Matéria de Análise de Dados (MAD) - Biomedicina</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="estilo-de-codigo-e-manipulacao-das-variaveis" class="section level1">
<h1><span class="header-section-number">6</span> Estilo de Código e Manipulação das Variáveis</h1>
<div id="questoes-de-estilo" class="section level2">
<h2><span class="header-section-number">6.1</span> Questões de Estilo</h2>
<p>Como você apresenta o código vai facilitar o seu entendimento do que você fez tanto quanto ajudar uma outra pessoa entendê-lo. Vale a pena seguir umas regras consistentes. Assim, tudo mundo (e R) vai entender o código que você escreveu. Vamos fazer um exemplo para mostrar este ponto.</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb31-1" data-line-number="1"><span class="co">## 1ª Versão</span></a>
<a class="sourceLine" id="cb31-2" data-line-number="2">peso &lt;-<span class="st"> </span><span class="dv">55</span>  <span class="co">## Pessoa pesa 55 kg.</span></a>
<a class="sourceLine" id="cb31-3" data-line-number="3"></a>
<a class="sourceLine" id="cb31-4" data-line-number="4"><span class="co">## 2ª Versão</span></a>
<a class="sourceLine" id="cb31-5" data-line-number="5">peso_kg &lt;-<span class="st"> </span><span class="dv">55</span> <span class="co">## Mais claro</span></a>
<a class="sourceLine" id="cb31-6" data-line-number="6"></a>
<a class="sourceLine" id="cb31-7" data-line-number="7"><span class="co">## Pode Converter à Libra</span></a>
<a class="sourceLine" id="cb31-8" data-line-number="8">peso_lb &lt;-<span class="st"> </span>peso_kg <span class="op">*</span><span class="st"> </span><span class="fl">2.2</span></a>
<a class="sourceLine" id="cb31-9" data-line-number="9">peso_lb</a></code></pre></div>
<pre><code>## [1] 121</code></pre>
<p>O primeiro ponto a ressaltar é que este código tem muitos comentários. Fazemos comentários em R utilizando o sinal <code>#</code> (“hashtag”). R não interpreta qualquer caráter depois do primeiro <code>#</code> numa linha de código. Este pode ocorrer numa linha sozinha como <code>## 1ª Versão</code> ou depois de um operação como na segunda linha (<code>peso &lt;- 55 ## Pessoa pesa 55 kg.</code>).</p>
<p>A primeira versão da atribuição não é muito clara. Se não tivesse o comentário sobre <code>55 kg</code>, como você saberia que estávamos falando de conversão entre quilos, libras ou toneladas? A segunda versão esclarece diretamente no nome da variável <code>peso_kg</code>. E a linha que faz a conversão também tem uma variável com um bom nome que explica claramente o que é este valor.</p>
<p>Frequentemente, pessoas gostam de usar nomes muito breves, mas não muito claros com <code>x</code>, <code>i</code> ou <code>n24</code>. É muito melhor usar nomes que explicam o que contem a variável que de enfatizar brevidade.</p>
<p>Existem muitos outros aspetos de estilo que são padronizado no mundo de programação de R. Uma guia para um estilo claro de programação foi desenvolvido pelo Hadley Wickham de RStudio e pode ser achado aqui: <a href="http://style.tidyverse.org/" class="uri">http://style.tidyverse.org/</a>. O pacote <code>styler</code> que você carregou na instalação criou “Addins” no RStudio que pode acessar do item na barra superior. Esses opções permite que R em si coloca seu código no estilo correto seguindo as normas da guia de Wickham.</p>
<div class="figure" style="text-align: center"><span id="fig:styler"></span>
<img src="graficos/style_addin.png" alt="Styler Addins" width="195" />
<p class="caption">
Figure 6.1: Styler Addins
</p>
</div>
<div id="uma-pergunta-sobre-o-estilo-parenteses-depois-de-uma-funcao" class="section level3">
<h3><span class="header-section-number">6.1.1</span> Uma Pergunta sobre o Estilo – Parenteses depois de uma função</h3>
<p>Este é um bom momento para comentar porque sempre usamos <code>()</code> depois do nome da função. Com os parênteses, R vai executar a função. Sem eles, vai imprimir para a tela o código (ou seja, o conteúdo) da função. Por exemplo, na figura seguinte, mostro a função <code>coalesce</code> do pacote <code>dplyr</code>. Na primeira versão, <strong>sem</strong> parenteses, R mostra o código da função. Na segunda, <strong>com</strong> parenteses, R mostra o resultado do cálculo da função.</p>
<div class="figure" style="text-align: center"><span id="fig:getwd"></span>
<img src="graficos/coalesce()_vs_coalesce.png" alt="coalesce vs. coalesce()" width="338" />
<p class="caption">
Figure 6.2: coalesce vs. coalesce()
</p>
</div>
</div>
</div>
<div id="conjunto-dos-dados-mais-complicado" class="section level2">
<h2><span class="header-section-number">6.2</span> Conjunto dos Dados Mais Complicado</h2>
<p>Este exercício, que estou adaptando do currículo do grupo “Software Carpentry”, <a href="#fn4" class="footnote-ref" id="fnref4"><sup>4</sup></a> analisa dados médicos sobre tratamentos para a artrite e a inflamação que a doença causa. Ele mostra a avaliação de inflamação de 60 pacientes diariamente durante 40 dias.</p>
<p>Para nossos fins de aprender R, podemos aprender</p>
<ul>
<li>Como inserir dados nos objetos R</li>
<li>Como manipular esses dados</li>
<li>Gráficos básicos</li>
<li>Resumos descritivos de dados</li>
<li>Funções em R</li>
<li>Loops</li>
</ul>
<p>Imagine que você trabalha num laboratório farmacêutico que está desenvolvendo um novo tratamento para artrite. Você precisa avaliar os resultados de uma teste deste tratamento para ver se cumpriu os objetivos que a empresa teve para ele. Você recebe o arquivo <code>inflamação.csv</code>, um arquivo de Excel gravado no formato csv (<em>comma separated values</em>). Você precisa colocar este arquivo no seu <em>working directory</em> e carregar os dados na memoria onde R pode operar neles.</p>
<div id="passo-1-criar-um-projeto" class="section level3">
<h3><span class="header-section-number">6.2.1</span> Passo 1 — Criar Um Projeto</h3>
<p>Primeiro, criaremos um projeto em RStudio onde vamos colocar a análise de artrite.</p>
<p>Nós trabalharemos neste projeto (e pasta) enquanto trabalhamos com a artrite. No sistema operacional podemos colocar o arquivo <code>inflamação.csv</code> na pasta de seu projeto <code>artrite</code>.</p>
</div>
<div id="passo-2-carregar-o-tidyverse" class="section level3">
<h3><span class="header-section-number">6.2.2</span> Passo 2 — Carregar o Tidyverse</h3>
<p>Neste exercício e em todo o curso, nós vamos usar muitas funções do Tidyverse. Estas funções existem em vários pacotes. O pacote <code>tidyverse</code> é uma coleção dessas outras pacotes e vai carregar eles. Apesar que existem outros pacotes no Tidyverse, aqueles carregados pelo <code>tidyverse</code> são os mais importantes e eles permitem que nós podemos ler arquivos, manipular dados, fazer análises e visualizar gráficos. Antes de desenhar gráficos, nós vamos carregar um outro pacote <code>ggpubr</code> que simplifica os comandos gráficos utilizando a tecnologia <code>ggplot</code>, o componente centrais dos gráficos de Tidyverse.</p>
<p>Para carregar pacotes que já temos instalados no computador, usamos a função <code>library()</code> com o nome do pacote como argumento. Entretanto, para ver o efeito de carregar o Tidyverse, vamos olhar na diferença entre o estado da memoria antes e depois do Tidyverse. Para isso, usamos a função <code>sessionInfo()</code> para mostra o que está carregado. Primeiro, aqui é como sua memoria quando você inicia R.</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb33-1" data-line-number="1"><span class="kw">sessionInfo</span>() <span class="co">## Comando para mostrar o estado do sistema R neste momento</span></a></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:siantes"></span>
<img src="graficos/session_bare.png" alt="Pacotes Antes Tidyverse" width="420" />
<p class="caption">
Figure 6.3: Pacotes Antes Tidyverse
</p>
</div>
<p>Só têm os sete pacotes básicos que R carregar quando incia. Agora vamos carregar o Tidyverse.</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb34-1" data-line-number="1"><span class="kw">library</span>(tidyverse)</a></code></pre></div>
<pre><code>## ── Attaching packages ───────────────────────────────────────────── tidyverse 1.2.1 ──</code></pre>
<pre><code>## ✔ ggplot2 3.2.0          ✔ purrr   0.3.2     
## ✔ tibble  2.1.3          ✔ dplyr   0.8.3     
## ✔ tidyr   0.8.3.9000     ✔ stringr 1.4.0     
## ✔ readr   1.3.1          ✔ forcats 0.4.0</code></pre>
<pre><code>## ── Conflicts ──────────────────────────────────────────────── tidyverse_conflicts() ──
## ✖ dplyr::filter() masks stats::filter()
## ✖ dplyr::lag()    masks stats::lag()</code></pre>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb38-1" data-line-number="1"><span class="kw">sessionInfo</span>()</a></code></pre></div>
<div class="figure" style="text-align: center">
<img src="graficos/session_tidyv.png" alt="Tidyverse Básico" width="418" />
<p class="caption">
(#fig:tidyverse_load)Tidyverse Básico
</p>
</div>
<p>Agora, a memoria é bem diferente. Temos os nove pacotes carregados como <em>other attached packages</em> e 15 pacotes novos carregados em um <em>namespace</em> (conceito mais avançado que nosso curso) que são disponíveis para uso pelos pacotes de tidyverse.</p>
</div>
<div id="passo-3-download-os-dados-de-github" class="section level3">
<h3><span class="header-section-number">6.2.3</span> Passo 3 — Download os Dados de GitHub</h3>
<p>Os dados atualmente existem no GitHub. No capitulo 1, aprendemos como fazer o download dos arquivos do GitHub. Siga o mesmo processo em seu sistema operacional e com seu browser para pôr <code>inflamacao.csv</code> na pasta do seu projeto <code>artrite</code>.</p>
<p>Para ajudar, aqui é um resumo dos passos:</p>
<ul>
<li>aponte a browser para o repo do curso: <a href="https://github.com/jameshunterbr/MAD-Biomedicina-2019" class="uri">https://github.com/jameshunterbr/MAD-Biomedicina-2019</a></li>
<li>clique no nome do arquivo: <code>inflamacao.csv</code></li>
<li>clique no botão “Raw”</li>
<li>salvar a página na pasta do projeto. <a href="#fn5" class="footnote-ref" id="fnref5"><sup>5</sup></a></li>
</ul>
</div>
<div id="passo-4-carregar-os-dados-na-memoria-de-r" class="section level3">
<h3><span class="header-section-number">6.2.4</span> Passo 4 — Carregar os Dados na Memoria de R</h3>
<p>R precisa ter todos os dados em que vai operar na memoria ativa do computador. Não trabalha nas cópias gravadas dos arquivos para fazer operações. Outras linguagens como SQL e C podem operar em dados gravados, mas R não. Entretanto, este não e um limite em qualquer sentido prática. Nos laptops modernos, o espaço de memoria fica suficiente grande para suportar quase qualquer base de dados, mesmo se tivesse múltiplas gigabytes de dados.</p>
<p>Para carregar, nós vamos usar a função <code>read_csv()</code> que vai pegar o arquivo e criar um objeto na memoria do R.</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb39-1" data-line-number="1">dados &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="dt">file =</span> <span class="st">&quot;inflamacao.csv&quot;</span>, <span class="dt">col_names =</span> <span class="ot">FALSE</span>)</a></code></pre></div>
<div class="figure" style="text-align: center">
<img src="graficos/environment_dados.png" alt="Environment com dados" width="216" />
<p class="caption">
(#fig:env_dados)Environment com dados
</p>
</div>
<p>A função <code>read_csv()</code> vem do pacote <code>readr</code>. Ela tenta automatizar tanto quanto é possível a importação dos dados. Até, ela analisa os dados para decidir qual é o tipo de dados que o conjunto tem: caráter, número inteiro, número decimal, lógico, etc. Também usa a primeira linha como o nome das variáveis (colunas da planilha). Neste caso, as colunas só têm dados, não nomes na primeira linha. Então, temos que avisar <code>read_csv()</code> disso. Assim, usamos o argumento <code>colnames = FALSE</code> porque o padrão é <code>colnames = TRUE</code>, como a tela de <em>Help</em> para <code>read_csv</code> mostra.</p>
<div class="figure" style="text-align: center">
<img src="graficos/read_csv_help.png" alt="read_csv Help" width="376" />
<p class="caption">
(#fig:help_read_csv)read_csv Help
</p>
</div>
</div>
<div id="passo-5-qual-e-o-tipo-do-conjunto-dos-dados" class="section level3">
<h3><span class="header-section-number">6.2.5</span> Passo 5 — Qual É o Tipo do Conjunto dos Dados?</h3>
<p>Para saber os tipos de análises que podemos fazer no <code>dados</code>, precisamos determinar o que temos. Sabemos que temos 40 variáveis que são os dias em que a avaliação foi feita. Primeiro nível de informação é sobre o tipo de dados que temos. Para isso, usamos a função <code>class()</code>.</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb40-1" data-line-number="1"><span class="kw">class</span>(dados)</a></code></pre></div>
<pre><code>## [1] &quot;spec_tbl_df&quot; &quot;tbl_df&quot;      &quot;tbl&quot;         &quot;data.frame&quot;</code></pre>
<p>Este quatro descritores indicam que este é um <em>tibble</em>, um tipo avançado de <code>data.frame</code>. Este é o tipo básico de um conjunto de dados quadrado, com variáveis nas colunas e observações na fileiras. As capacidades adicionais têm a maior significância para as operações internas do R e das funções do Tidyverse, mas pode ser muito mais rápido para conjuntos grandes de dados.</p>
<p>Existem duas outras funções que mostram mais detalhe sobre o conjunto. <code>str()</code> vai mostrar para todo o conjunto a classe (tipo) da variável os primeiros valores dela. <code>glimpse()</code> faz a mesma coisa mas com as linhas e colunas trocados. <code>glimpse()</code> oferece uma visão mais completa que <code>str()</code>. Por causa do tamanho do output in nosso caso com 40 variáveis, vou limitar ela para cinco variáveis usando uma técnica que aprenderemos abaixo.</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb42-1" data-line-number="1"><span class="kw">str</span>(dados[, <span class="dv">1</span><span class="op">:</span><span class="dv">5</span>])</a></code></pre></div>
<pre><code>## Classes &#39;tbl_df&#39;, &#39;tbl&#39; and &#39;data.frame&#39;:    60 obs. of  5 variables:
##  $ X1: num  0 0 0 0 0 0 0 0 0 0 ...
##  $ X2: num  0 1 1 0 1 0 0 0 0 1 ...
##  $ X3: num  1 2 1 2 1 1 2 1 0 1 ...
##  $ X4: num  3 1 3 0 3 2 2 2 3 2 ...
##  $ X5: num  1 2 3 4 3 2 4 3 1 1 ...</code></pre>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb44-1" data-line-number="1"><span class="kw">glimpse</span>(dados[, <span class="dv">1</span><span class="op">:</span><span class="dv">5</span>])</a></code></pre></div>
<pre><code>## Observations: 60
## Variables: 5
## $ X1 &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…
## $ X2 &lt;dbl&gt; 0, 1, 1, 0, 1, 0, 0, 0, 0, 1, 1, 1, 0, 0, 1, 1, 0, 0, 0, 1, 1…
## $ X3 &lt;dbl&gt; 1, 2, 1, 2, 1, 1, 2, 1, 0, 1, 0, 0, 2, 0, 2, 1, 0, 0, 2, 2, 1…
## $ X4 &lt;dbl&gt; 3, 1, 3, 0, 3, 2, 2, 2, 3, 2, 0, 0, 1, 0, 1, 0, 0, 1, 1, 0, 3…
## $ X5 &lt;dbl&gt; 1, 2, 3, 4, 3, 2, 4, 3, 1, 1, 4, 3, 4, 1, 1, 1, 2, 2, 2, 1, 1…</code></pre>
<p>Também, podemos examinar o tamanho do conjunto usando a função <code>dim()</code> (dimensões). Esta retorna para você o número e linhas e colunas nos dados.</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb46-1" data-line-number="1"><span class="kw">dim</span>(dados)</a></code></pre></div>
<pre><code>## [1] 60 40</code></pre>
<p>As variáveis são do mesmo tipo. Por isso, podemos olhar no primeiro cinco para ver suficiente detalhe sobre os dados.</p>
</div>
<div id="passo-6-subconjuntos-subsets-de-dados" class="section level3">
<h3><span class="header-section-number">6.2.6</span> Passo 6 — Subconjuntos (<em>Subsets</em>) de <code>dados</code></h3>
<p>Nós queremos focar nas primeiras cinco variáveis porque mais que isso é simplesmente repetitivo e desnecessária por enquanto. Têm duas maneiras que podemos fazer este foco, um que vem de R básico e o outro que introduza a gente para <code>dplyr</code> e a manipulação dos dados no Tidyverse.</p>
<p><em>Subconjuntos em R Básico</em> – Índices</p>
<p>Podemos referir a um dado individual colocando um índice dentro de colchetes (<code>[]</code>), com a fileira primeiro e a coluna depois. Por exemplo, para o primeiro dado em <code>dados</code>, podemos dizer <code>dados[1,1]</code>. Se nós queremos as avaliações para os primeiros cinco dias (colunas) para paciente 1, podemos dizer <code>dados[1, 1:5]</code>. Os dois-pontos diz “todos os valores entre valor 1 e valor 5”. Se nós queremos as avaliações dos cinco primeiro pacientes (fileiras) no primeiro dia (coluna), podemos dizer <code>dados[1:5, 1]</code>. Se nós queremos ver todos as colunas ou todas as fileiras, simplesmente precisa deixar essa parte do índice em branco. Mas precisa incluir sempre a virgula ou R não vai saber em qual dimensão você refere. Por exemplo, se queremos ver o valor para todos os dias de paciente 50, podemos dizer <code>dados[50, ]</code>. O próximo bloco de código mostra todas esses opções.</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb48-1" data-line-number="1">dados[<span class="dv">1</span>,<span class="dv">1</span>]</a></code></pre></div>
<pre><code>## # A tibble: 1 x 1
##      X1
##   &lt;dbl&gt;
## 1     0</code></pre>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb50-1" data-line-number="1">dados[<span class="dv">1</span>, <span class="dv">1</span><span class="op">:</span><span class="dv">5</span>] <span class="co"># 1º paciente, 1º cinco dias</span></a></code></pre></div>
<pre><code>## # A tibble: 1 x 5
##      X1    X2    X3    X4    X5
##   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1     0     0     1     3     1</code></pre>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb52-1" data-line-number="1">dados[<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>, <span class="dv">1</span>] <span class="co"># 1º 5 pacientes, 1º dia</span></a></code></pre></div>
<pre><code>## # A tibble: 5 x 1
##      X1
##   &lt;dbl&gt;
## 1     0
## 2     0
## 3     0
## 4     0
## 5     0</code></pre>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb54-1" data-line-number="1">dados[<span class="dv">50</span>, ] <span class="co"># paciente 50, todos os dias</span></a></code></pre></div>
<pre><code>## # A tibble: 1 x 40
##      X1    X2    X3    X4    X5    X6    X7    X8    X9   X10   X11   X12
##   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1     0     0     1     2     3     4     5     7     5     4    10     5
## # … with 28 more variables: X13 &lt;dbl&gt;, X14 &lt;dbl&gt;, X15 &lt;dbl&gt;, X16 &lt;dbl&gt;,
## #   X17 &lt;dbl&gt;, X18 &lt;dbl&gt;, X19 &lt;dbl&gt;, X20 &lt;dbl&gt;, X21 &lt;dbl&gt;, X22 &lt;dbl&gt;,
## #   X23 &lt;dbl&gt;, X24 &lt;dbl&gt;, X25 &lt;dbl&gt;, X26 &lt;dbl&gt;, X27 &lt;dbl&gt;, X28 &lt;dbl&gt;,
## #   X29 &lt;dbl&gt;, X30 &lt;dbl&gt;, X31 &lt;dbl&gt;, X32 &lt;dbl&gt;, X33 &lt;dbl&gt;, X34 &lt;dbl&gt;,
## #   X35 &lt;dbl&gt;, X36 &lt;dbl&gt;, X37 &lt;dbl&gt;, X38 &lt;dbl&gt;, X39 &lt;dbl&gt;, X40 &lt;dbl&gt;</code></pre>
<p><em>Subconjuntos no Tidyverse</em> – <code>dplyr</code></p>
<p>Este código parece razoável, mas não muito claro. Não segue as recomendações sobre nomes de variáveis por exemplo. É típico das linguagens de computação. Com o Tidyverse, podemos fazer este aparecer mais como um idioma normal. Nós vamos usar umas novas funções para fazer os subconjuntos que queremos.</p>
<p>Primeiro desses funções permite que combinamos operações das funções diferentes na mesma expressão. Este símbolo está chamada o “pipe” e está escrito assim: <code>%&gt;%</code>. Este conceito é muito comum em linguagens de computação, especialmente do sistema UNIX, apesar que está expressa por vários símbolos. Em R, o pipe quer dizer “aceite o resultado da operação no lado esquerdo e aplique a função no lado direto ao este resultado”. Com o uso do pipe, nós não precisamos repetir o nome do objeto do lado esquerdo da operação quando você especifica a função no lado direto.</p>
<p>O termo <em>pipe</em> não vem do sentido de tubo, mas da palavra “cachimbo” vindo de arte surrealista, especificamente do quadro do pintor belga René Magritte, “Ceci n’est pas une pipe”. Por quê? Porque veio originalmente do pacote <code>magritte</code>, mas agora está incorporado no <code>dplyr</code>, o pacote principal do <code>tidyverse</code> para a manipulação dos dados.</p>
<p><img src="graficos/ceci_nest_pas_pipe.jpg" width="135" style="display: block; margin: auto;" /></p>
<p>Para nosso exemplo, o código vai parecer complicado em comparação ao código acima, mas ele ilustra funções importantes que ajudaria você em projetos mais complicados. As funções que vamos usar são os seguintes:</p>
<ul>
<li><p><code>slice()</code> – seleciona as linhas segundo a posição delas</p></li>
<li><p><code>select()</code> – seleciona as colunas por nome</p></li>
</ul>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb56-1" data-line-number="1"><span class="co"># equivalente a dados[1,1]</span></a>
<a class="sourceLine" id="cb56-2" data-line-number="2"></a>
<a class="sourceLine" id="cb56-3" data-line-number="3">dados <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb56-4" data-line-number="4"><span class="st">  </span><span class="kw">slice</span>(<span class="dv">1</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb56-5" data-line-number="5"><span class="st">  </span><span class="kw">select</span>(X1)</a></code></pre></div>
<pre><code>## # A tibble: 1 x 1
##      X1
##   &lt;dbl&gt;
## 1     0</code></pre>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb58-1" data-line-number="1"><span class="co"># equivalente a dados[1, 1:5]</span></a>
<a class="sourceLine" id="cb58-2" data-line-number="2"></a>
<a class="sourceLine" id="cb58-3" data-line-number="3">dados <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb58-4" data-line-number="4"><span class="st">  </span><span class="kw">slice</span>(<span class="dv">1</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb58-5" data-line-number="5"><span class="st">  </span><span class="kw">select</span>(X1<span class="op">:</span>X5)</a></code></pre></div>
<pre><code>## # A tibble: 1 x 5
##      X1    X2    X3    X4    X5
##   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1     0     0     1     3     1</code></pre>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb60-1" data-line-number="1"><span class="co"># equivalente a dados[1:5, 1]</span></a>
<a class="sourceLine" id="cb60-2" data-line-number="2"></a>
<a class="sourceLine" id="cb60-3" data-line-number="3">dados <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb60-4" data-line-number="4"><span class="st">  </span><span class="kw">slice</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb60-5" data-line-number="5"><span class="st">  </span><span class="kw">select</span>(X1)</a></code></pre></div>
<pre><code>## # A tibble: 5 x 1
##      X1
##   &lt;dbl&gt;
## 1     0
## 2     0
## 3     0
## 4     0
## 5     0</code></pre>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb62-1" data-line-number="1"><span class="co"># equivalente a dados[50, ]</span></a>
<a class="sourceLine" id="cb62-2" data-line-number="2">dados <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb62-3" data-line-number="3"><span class="st">  </span><span class="kw">slice</span>(<span class="dv">50</span>)</a></code></pre></div>
<pre><code>## # A tibble: 1 x 40
##      X1    X2    X3    X4    X5    X6    X7    X8    X9   X10   X11   X12
##   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1     0     0     1     2     3     4     5     7     5     4    10     5
## # … with 28 more variables: X13 &lt;dbl&gt;, X14 &lt;dbl&gt;, X15 &lt;dbl&gt;, X16 &lt;dbl&gt;,
## #   X17 &lt;dbl&gt;, X18 &lt;dbl&gt;, X19 &lt;dbl&gt;, X20 &lt;dbl&gt;, X21 &lt;dbl&gt;, X22 &lt;dbl&gt;,
## #   X23 &lt;dbl&gt;, X24 &lt;dbl&gt;, X25 &lt;dbl&gt;, X26 &lt;dbl&gt;, X27 &lt;dbl&gt;, X28 &lt;dbl&gt;,
## #   X29 &lt;dbl&gt;, X30 &lt;dbl&gt;, X31 &lt;dbl&gt;, X32 &lt;dbl&gt;, X33 &lt;dbl&gt;, X34 &lt;dbl&gt;,
## #   X35 &lt;dbl&gt;, X36 &lt;dbl&gt;, X37 &lt;dbl&gt;, X38 &lt;dbl&gt;, X39 &lt;dbl&gt;, X40 &lt;dbl&gt;</code></pre>
<p>Uma vantagem da gramatica do Tidyverse com o pipe é que facilita a explicação da operação do comando. Por exemplo, a última expressão pode ser lido como: “começa com o conjunto <code>dados</code>; depois utiliza as primeiras 5 fileiras e depois seleciona a primeira variável”. Quando você tem expressões complicadas, que usam muitos verbos (palavra que o Tidyverse usa para refere às ações como <code>slice</code> ou <code>select</code>), este habilidade de ler a expressão em quase-português faz a programação mais compreensível.</p>
<p>Você pode ver que as variáveis têm nomes estranhos, <code>X1</code>, etc. Para nossos fins, este não é horrível porque refere corretamente ao número de dia, 1 até 40. Entretanto, podemos fazer melhor. No próximo bloco, nós vamos dar nomes mais claros às variáveis introduzindo o conceito de um “<em>loop</em>” ou uma série repetitiva das ações que podemos executar repetidamente.</p>
</div>
<div id="novos-nomes-para-as-variaveis-loops" class="section level3">
<h3><span class="header-section-number">6.2.7</span> Novos Nomes para as Variáveis — Loops</h3>
<p>Nomes mais claros para as variáveis ajudaria nosso entendimento do conjunto <code>dados</code> e faria a apresentação dos dados mais profissional. Existem várias técnicas que podemos usar para fazer, mas é um bom momento para ver um loop, um dos conceitos mais básicos da programação. Nós vamos criar um loop de tipo “<em>for</em>”, que vai repetir comandos um certo número de vezes. O loop tem o formato:</p>
<p><code>for</code>(expressão que define o número de repetições) {
código para executar dentro do loop
}</p>
<p>Queremos que o loop considerar todas as variáveis, o número de que podemos determinar automaticamente com a função <code>seq_along()</code>. Esta função define uma sequência que começa com 1 e continua até o número das variáveis. Dentro do loop nós vamos criar um vetor com 40 cadeias de caráteres composto da palavra “dia” mais um número para o dia. Para fazer isso, usamos a função <code>paste0()</code> que concatena os argumentos da função e produz uma cadeia de caráteres. O número resultará do contador das iterações do loop, <code>i</code>. <code>paste0</code> difere da função <code>paste()</code> só pelo fato que <code>paste()</code> insere um espaço entre os elementos da função mas <code>paste0()</code> não, como implica o nome da função. Quando o loop completa as 40 iterações, ele para e passa controle para a próxima expressão no programa. Nesta linha, a função <code>col_names()</code> vai transferir o vetor dos nomes para <code>dados</code> como novos nomes das variáveis. [^6]</p>
<p>[^6] O Tidyverse tem uma função equivalente, <code>glue()</code>, que vem do pacote homônimo. O funcionamento é em grande parte o mesmo. Pessoalmente, quando trabalho só com concatenação de textos, uso <code>paste()</code> e quando estou combinando o resultado dos cálculos com texto, uso <code>glue()</code>. Mas, aqui, para consistência, ficarei com <code>paste()</code> e <code>paste0()</code>.</p>
<p>Antes de começar a operação do loop, devemos instruir R onde colocar os nomes que o loop está compondo. Vou criar uma variável <code>nome</code> que será um vetor vazio. Durante a operação do loop, ele vai acrescentar os novos valores usando a função <code>c()</code>.</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb64-1" data-line-number="1">nome &lt;-<span class="st"> </span><span class="kw">vector</span>(<span class="dt">mode =</span> <span class="st">&quot;character&quot;</span>) </a>
<a class="sourceLine" id="cb64-2" data-line-number="2"><span class="cf">for</span> (i <span class="cf">in</span> <span class="kw">seq_along</span>(dados)) {</a>
<a class="sourceLine" id="cb64-3" data-line-number="3">  nome &lt;-<span class="st"> </span><span class="kw">c</span>(nome, <span class="kw">paste0</span>(<span class="st">&quot;dia&quot;</span>, i))</a>
<a class="sourceLine" id="cb64-4" data-line-number="4">}</a>
<a class="sourceLine" id="cb64-5" data-line-number="5"><span class="kw">colnames</span>(dados) &lt;-<span class="st"> </span>nome</a>
<a class="sourceLine" id="cb64-6" data-line-number="6"><span class="kw">str</span>(dados[, <span class="dv">1</span><span class="op">:</span><span class="dv">5</span>])</a></code></pre></div>
<pre><code>## Classes &#39;tbl_df&#39;, &#39;tbl&#39; and &#39;data.frame&#39;:    60 obs. of  5 variables:
##  $ dia1: num  0 0 0 0 0 0 0 0 0 0 ...
##  $ dia2: num  0 1 1 0 1 0 0 0 0 1 ...
##  $ dia3: num  1 2 1 2 1 1 2 1 0 1 ...
##  $ dia4: num  3 1 3 0 3 2 2 2 3 2 ...
##  $ dia5: num  1 2 3 4 3 2 4 3 1 1 ...</code></pre>
<p>Deixa-me explicar todos as linhas e os elementos deste código:</p>
<ul>
<li><p><code>nome &lt;-</code> a linha que especifica o vetor para conter os resultados do loop</p></li>
<li><p><code>for</code> a definição do loop; a linha termina com a chave que inicia o bloco de código que o loop vai executar</p></li>
<li><p><code>(i in seq_along(dados))</code> instrução para substituir a variável <code>i</code> no bloco de código com os números definidos pela expressão <code>seq_along</code></p></li>
<li><p><code>seq_along(dados)</code> - a sequência a ser definido que representa todos as variáveis conforme o cálculo abaixo</p></li>
</ul>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb66-1" data-line-number="1"><span class="kw">seq_along</span>(dados)</a></code></pre></div>
<pre><code>##  [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23
## [24] 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40</code></pre>
<ul>
<li><p><code>nome &lt;- c(nome, paste0(&quot;dia&quot;, i))</code> Concatenar a palavra “dia” com o valor de <code>i</code> (e.g. “dia1”) e acrescentar este valor ao vetor <code>nome</code></p></li>
<li><p><code>}</code> indicação do fim do bloco de código; quando encontra isso, o loop volta ao início e processa o próximo valor de <code>i</code></p></li>
<li><p><code>colnames(dados) &lt;- nome</code> Quando termina o loop, dar novos nomes às colunas (variáveis) de <code>dados</code></p></li>
<li><p><code>str(dados[, 1:5])</code> Mostra a nova estrutura das primeira cinco colunas do tibble <code>dados</code> para confirmar que fizemos a operação de dar novos nomes com êxito.</p></li>
</ul>
</div>
</div>
<div id="analise-de-dados-de-inflamacao" class="section level2">
<h2><span class="header-section-number">6.3</span> Análise de Dados de Inflamação</h2>
<p>Vamos fazer um resumo dos dados e olhar em alguns gráficos para poder entender os dados melhor e preparar para tirar conclusões sobre o novo tratamento. Só para esta apresentação dos dados e das funções, vamos limitar os resumos aos dias 20 até dia 25. Mas os gráficos incluirá todos os dias (variáveis). Uma função básica para resumir dados é <code>summary()</code> que relata os valores seguintes:</p>
<ul>
<li>valor mínimo da variável (<code>min</code>)</li>
<li>1º quartil (25º percentil)</li>
<li>mediana (50º percentil) (<code>median</code>)</li>
<li>3º quartil (75º percentil)</li>
<li>valor máximo (<code>max</code>)</li>
</ul>
<p>Também, existem muito outros resumos dos dados em R básico e nos pacotes que já fez o download. Durante o curso, vai encontrar vários desses pacotes e funções. O que <code>summary()</code> não relata que é muito importante é uma medida de variabilidade. Normalmente, usamos o desvio padrão para medir isso. Precisamos calcular isso separadamente de <code>summary()</code> usando a função <code>sd()</code> (<em>standard deviation</em>). Vamos calcular um resumo dos dados depois de fazer o subset que queremos.</p>
<p>Mas, para fazer este cálculo de <code>sd()</code>, podemos usar um loop, mas tem outra maneira de conseguir a mesma coisa. O objetivo é calcular uma função para um número de variáveis em uma única operação. A família das funções <code>map()</code> calcula uma função (neste caso <code>sd()</code>) para todas as variáveis de nosso subset das variáveis. A função é muito simples e flexível. <code>map()</code> normalmente produz um tipo de dados chamado uma lista. Nós não queremos isso; queremos um vetor dos desvios padrão. Para conseguir isso, nós usamos o variante <code>map_dbl()</code> que produz um vetor dos números reais. Estamos colocando isso numa expressão <em>tidy</em> em que o pipe entrega o subset (<code>sub_dados</code>) para a função <code>map_dbl()</code>, a expressão só precisa o nome de função que queremos calcular (<code>sd</code>) sem os parênteses.</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb68-1" data-line-number="1">sub_dados &lt;-<span class="st"> </span>dados <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb68-2" data-line-number="2"><span class="st">  </span><span class="kw">select</span>(dia20<span class="op">:</span>dia25)</a>
<a class="sourceLine" id="cb68-3" data-line-number="3"><span class="kw">glimpse</span>(sub_dados)</a></code></pre></div>
<pre><code>## Observations: 60
## Variables: 6
## $ dia20 &lt;dbl&gt; 18, 6, 10, 7, 17, 12, 6, 19, 11, 8, 18, 11, 15, 16, 9, 17,…
## $ dia21 &lt;dbl&gt; 6, 18, 19, 17, 9, 12, 9, 20, 6, 18, 8, 9, 13, 15, 12, 9, 1…
## $ dia22 &lt;dbl&gt; 13, 4, 14, 4, 14, 5, 17, 8, 16, 15, 15, 16, 12, 9, 13, 8, …
## $ dia23 &lt;dbl&gt; 11, 12, 12, 4, 9, 18, 15, 5, 12, 16, 15, 18, 8, 11, 10, 12…
## $ dia24 &lt;dbl&gt; 11, 5, 17, 7, 7, 9, 8, 13, 6, 14, 16, 6, 7, 4, 4, 11, 17, …
## $ dia25 &lt;dbl&gt; 7, 12, 7, 6, 13, 5, 9, 15, 8, 12, 11, 12, 4, 6, 12, 11, 5,…</code></pre>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb70-1" data-line-number="1"><span class="kw">summary</span>(sub_dados)</a></code></pre></div>
<pre><code>##      dia20           dia21           dia22           dia23      
##  Min.   : 5.00   Min.   : 5.00   Min.   : 4.00   Min.   : 4.00  
##  1st Qu.: 8.75   1st Qu.: 9.00   1st Qu.: 8.00   1st Qu.: 7.75  
##  Median :13.00   Median :14.00   Median :13.00   Median :11.00  
##  Mean   :12.35   Mean   :13.25   Mean   :11.97   Mean   :11.03  
##  3rd Qu.:16.00   3rd Qu.:16.25   3rd Qu.:15.25   3rd Qu.:15.00  
##  Max.   :19.00   Max.   :20.00   Max.   :19.00   Max.   :18.00  
##      dia24           dia25     
##  Min.   : 4.00   Min.   : 4.0  
##  1st Qu.: 6.75   1st Qu.: 7.0  
##  Median :10.00   Median :10.5  
##  Mean   :10.17   Mean   :10.0  
##  3rd Qu.:13.25   3rd Qu.:13.0  
##  Max.   :17.00   Max.   :16.0</code></pre>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb72-1" data-line-number="1">sub_dados <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">map_dbl</span>(sd)</a></code></pre></div>
<pre><code>##    dia20    dia21    dia22    dia23    dia24    dia25 
## 4.539189 4.276958 4.587997 4.234510 4.134053 3.741657</code></pre>
</div>
<div id="graficos-do-conjunto-dos-dados" class="section level2">
<h2><span class="header-section-number">6.4</span> Gráficos do Conjunto dos Dados</h2>
<p>Com um conjunto de dados intensivo, olhando nas tabelas e resumos não ajuda muito no entendimento do que dizem os dados. Gráficos comunicam melhor. Primeiro, queremos ver a tendência da inflamação no decorrer do estudo. Cresceu, diminuiu, quando, por quanto? Para descobrir isso, podemos calcular a média para cada dia e mostrar isso num gráfico de dispersão (<em>scatter plot</em>). Para este gráfico, nós vamos ficar com o plotagem simples de base R. Apesar isso, o gráfico seria o resultado de um expressão <em>tidy</em> que calcula as médias dos dias e entregam eles para a função <code>plot()</code>. Os argumentos incluídos aqui para a plotagem tem a ver com a apresentação, como títulos (<code>main</code>, <code>xlab</code>, <code>ylab</code>) e estilo de caráter (<code>pch</code>).</p>
<p>Anote também que usamos a função <code>map_dbl()</code> de novo para calcular as médias e entregar esses valores para comando gráfico.</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb74-1" data-line-number="1">dados <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb74-2" data-line-number="2"><span class="st">  </span><span class="kw">map_dbl</span>(mean) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb74-3" data-line-number="3"><span class="st">  </span><span class="kw">plot</span>(<span class="dt">type =</span> <span class="st">&quot;p&quot;</span>, <span class="dt">pch =</span> <span class="dv">19</span>, </a>
<a class="sourceLine" id="cb74-4" data-line-number="4">       <span class="dt">main =</span> <span class="st">&quot;Inflamação por Dia</span><span class="ch">\n</span><span class="st">com Novo Tratamento&quot;</span>,</a>
<a class="sourceLine" id="cb74-5" data-line-number="5">       <span class="dt">xlab =</span> <span class="st">&quot;Dia&quot;</span>,</a>
<a class="sourceLine" id="cb74-6" data-line-number="6">       <span class="dt">ylab =</span> <span class="st">&quot;Grau de Inflamação&quot;</span>) </a></code></pre></div>
<div class="figure">
<img src="apostila_biomedicina_bd_files/figure-html/graf_scat-1.png" alt="Gráfico de Dispersão" width="480" />
<p class="caption">
(#fig:graf_scat)Gráfico de Dispersão
</p>
</div>
</div>
<div id="whew-final-da-introducao" class="section level2">
<h2><span class="header-section-number">6.5</span> Whew! Final da Introdução</h2>
<p>Em pouco tempo, você já fez bastante R. Vale a pena tentar os blocos de código em casa e talvez ler a apostila mais de uma vez. Ao final do curso, este documento seria muito maior, com minhas notas para todas as aulas gravadas aqui também. Vai ser um pequeno livro sobre R.</p>
<p>Você olhou em cálculos simples e um conjunto de dados mais avançado. Você viu várias funções. Quando estamos juntos, nós vamos aplicar estas técnicas e muitas outras para problemas relacionados à biomedicina. Se você tem alguns assuntos que quer que eu cobra nas aulas, por favor entre em contato. Estou sempre aberto às sugestões.</p>
</div>
</div>
<div class="footnotes">
<hr />
<ol start="4">
<li id="fn4"><p>Agradeço Software Carpentry pelo uso desses dados. (<a href="http://swcarpentry.github.io/" class="uri">http://swcarpentry.github.io/</a>)<a href="estilo-de-codigo-e-manipulacao-das-variaveis.html#fnref4" class="footnote-back">↩</a></p></li>
<li id="fn5"><p>Se o browser quer que você usa o sufixo “txt” para seu arquivo, precisa insistir no uso de “csv”. Um arquivo “csv” é um tipo de arquivo de texto simples, mas outros programas como Excel só querem ver o sufixo “csv”.<a href="estilo-de-codigo-e-manipulacao-das-variaveis.html#fnref5" class="footnote-back">↩</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="projetos-e-pastas-1.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="importacao-dos-dados.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
},
"search": false
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
